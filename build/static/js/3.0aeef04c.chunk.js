(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[3],{118:function(e,t,r){e.exports=r.p+"static/media/logo.5d5d9eef.svg"},120:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(2),i=r(3),s=r(4),u=r(6),o=r(5),l=r(0),p=r(15),m=r(33),b=r(19),f=(r(96),r(55)),h=r(118);function d(){return p.nav.loginTop(l.createElement("div",{className:"d-flex align-items-center position-relative"},l.createElement("img",{className:"App-logo h-3c position-absolute",src:h,alt:"img"}),l.createElement("div",{className:"h3 flex-fill text-center"},l.createElement("span",{className:"text-primary mr-3"},"\u540c"),l.createElement("span",{className:"text-danger"},"\u82b1"))))}var v=[{type:"mobile",caption:"\u624b\u673a\u53f7",regex:p.mobileRegex},{type:"email",caption:"\u90ae\u7bb1",regex:p.emailRegex}];function g(e){return v.find((function(t){return!0===t.regex.test(e)}))}var y=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).account=void 0,e.type=void 0,e.password=void 0,e.verify=void 0,e.accountPageCaption="\u6ce8\u518c\u8d26\u53f7",e.accountLabel="\u6ce8\u518c\u8d26\u53f7",e.accountSubmitCaption="\u6ce8\u518c\u65b0\u8d26\u53f7",e.passwordPageCaption="\u8d26\u53f7\u5bc6\u7801",e.passwordSubmitCaption="\u6ce8\u518c\u65b0\u8d26\u53f7",e.successText="\u6ce8\u518c\u6210\u529f",e.login=function(){var t=Object(c.a)(a.a.mark((function t(r){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.p.login({user:r||e.account,pwd:e.password,guest:p.nav.guest});case 2:if(void 0!==(n=t.sent)){t.next=6;break}return alert("something wrong!"),t.abrupt("return");case 6:return t.next=8,p.nav.logined(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(s.a)(r,[{key:"internalStart",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVPage(x);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toVerify",value:function(e){this.account=e,this.openVPage(k)}},{key:"toPassword",value:function(){this.openVPage(E)}},{key:"toSuccess",value:function(e){this.openVPage(j,e)}},{key:"regReturn",value:function(e){var t;switch(e){default:return"\u670d\u52a1\u5668\u53d1\u751f\u9519\u8bef";case 4:return"\u9a8c\u8bc1\u7801\u9519\u8bef";case 0:return;case 1:t="\u7528\u6237\u540d "+this.account;break;case 2:t="\u624b\u673a\u53f7 +"+this.account;break;case 3:t="\u90ae\u7bb1 "+this.account}return t+" \u5df2\u7ecf\u88ab\u6ce8\u518c\u8fc7\u4e86"}},{key:"checkAccount",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.p.isExists(this.account);case 2:if(t=e.sent,void 0===(r=this.accountError(t))){e.next=6;break}return e.abrupt("return",r);case 6:return e.next=8,b.p.sendVerify(this.account,this.type,p.nav.oem);case 8:return t=e.sent,this.toVerify(this.account),e.abrupt("return");case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"accountError",value:function(e){if(e>0)return"\u5df2\u7ecf\u88ab\u6ce8\u518c\u4f7f\u7528\u4e86"}},{key:"execute",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t,r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={nick:void 0,user:this.account,pwd:this.password,country:void 0,mobile:void 0,mobileCountry:void 0,email:void 0,verify:this.verify},e.t0=this.type,e.next="mobile"===e.t0?4:"email"===e.t0?7:9;break;case 4:return t.mobile=Number(this.account),t.mobileCountry=86,e.abrupt("break",9);case 7:return t.email=this.account,e.abrupt("break",9);case 9:return e.next=11,b.p.register(t);case 11:if(0!==(r=e.sent)){e.next=16;break}return p.nav.clear(),this.toSuccess(),e.abrupt("return");case 16:return n=this.regReturn(r),e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(m.a),w=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).accountPageCaption="\u5bc6\u7801\u627e\u56de",e.accountLabel="\u8d26\u53f7",e.accountSubmitCaption="\u6ce8\u518c\u65b0\u8d26\u53f7",e.passwordPageCaption="\u91cd\u7f6e\u5bc6\u7801",e.passwordSubmitCaption="\u63d0\u4ea4",e.successText="\u6210\u529f\u4fee\u6539\u5bc6\u7801",e}return Object(s.a)(r,[{key:"execute",value:function(){var e=Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.p.resetPassword(this.account,this.password,this.verify,this.type);case 2:return t=e.sent,p.nav.clear(),this.toSuccess(t),e.abrupt("return",void 0);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"accountError",value:function(e){if(0===e)return"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8d26\u53f7"}}]),r}(y),x=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).schema=[{name:"user",type:"string",required:!0,maxLength:100},{name:"verify",type:"submit"}],e.uiSchema=void 0,e.res=Object(p.resLang)(f.d),e.page=function(){return l.createElement(p.Page,{header:e.controller.accountPageCaption},l.createElement("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"}},d(),l.createElement("div",{className:"h-3c"}),l.createElement(p.Form,{schema:e.schema,uiSchema:e.uiSchema,onButtonClick:e.onSubmit,onEnter:e.onEnter,requiredFlag:!1}),p.nav.privacyEntry()))},e.onSubmit=function(){var t=Object(c.a)(a.a.mark((function t(r,n){var c,i,s,u,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.clearContextErrors(),c="user",i=n.getValue(c),void 0!==(s=g(i))){t.next=7;break}return n.setError(c,"\u5fc5\u987b\u662f\u624b\u673a\u53f7\u6216\u90ae\u7bb1"),t.abrupt("return");case 7:if("mobile"!==(u=s.type)){t.next=12;break}if(11===i.length&&"1"===i[0]){t.next=12;break}return n.setError(c,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"),t.abrupt("return");case 12:return e.controller.account=i,e.controller.type=u,t.next=16,e.controller.checkAccount();case 16:void 0!==(o=t.sent)&&n.setError(c,o);case 18:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(c.a)(a.a.mark((function t(r,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("user"!==r){t.next=4;break}return t.next=3,e.onSubmit("verify",n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e}return Object(s.a)(r,[{key:"open",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uiSchema={items:{user:{widget:"text",label:this.controller.accountLabel,placeholder:"\u624b\u673a\u53f7\u6216\u90ae\u7bb1"},verify:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u53d1\u9001\u9a8c\u8bc1\u7801"}}},this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(m.b),k=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).schema=[{name:"verify",type:"number",required:!0,maxLength:6},{name:"submit",type:"submit"}],e.onVerifyChanged=function(e,t,r){e.setDisabled("submit",!t||6!==t.length)},e.uiSchema={items:{verify:{widget:"text",label:"\u9a8c\u8bc1\u7801",placeholder:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",onChanged:e.onVerifyChanged},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u4e0b\u4e00\u6b65 >",disabled:!0}}},e.onSubmit=function(){var t=Object(c.a)(a.a.mark((function t(r,n){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.controller.verify=n.getValue("verify"),t.next=3,b.p.checkVerify(e.controller.account,c);case 3:if(0!==t.sent){t.next=7;break}return n.setError("verify","\u9a8c\u8bc1\u7801\u9519\u8bef"),t.abrupt("return");case 7:e.controller.toPassword();case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(c.a)(a.a.mark((function t(r,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("verify"!==r){t.next=4;break}return t.next=3,e.onSubmit("submit",n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.page=function(){var t,r;switch(e.controller.type){case"mobile":t="\u624b\u673a\u53f7";break;case"email":t="\u90ae\u7bb1",r=l.createElement(l.Fragment,null,l.createElement("span",{className:"text-danger"},"\u6ce8\u610f"),": \u6709\u53ef\u80fd\u8bef\u4e3a\u5783\u573e\u90ae\u4ef6\uff0c\u8bf7\u68c0\u67e5",l.createElement("br",null))}return l.createElement(p.Page,{header:"\u9a8c\u8bc1\u7801"},l.createElement("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"}},"\u9a8c\u8bc1\u7801\u5df2\u7ecf\u53d1\u9001\u5230",t,l.createElement("br",null),l.createElement("div",{className:"py-2 px-3 my-2 text-primary bg-light"},l.createElement("b",null,e.controller.account)),r,l.createElement("div",{className:"h-1c"}),l.createElement(p.Form,{schema:e.schema,uiSchema:e.uiSchema,onButtonClick:e.onSubmit,onEnter:e.onEnter,requiredFlag:!1})))},e}return Object(s.a)(r,[{key:"open",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(m.b),E=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).schema=[{name:"pwd",type:"string",required:!0,maxLength:100},{name:"rePwd",type:"string",required:!0,maxLength:100},{name:"submit",type:"submit"}],e.uiSchema=void 0,e.onSubmit=function(){var t=Object(c.a)(a.a.mark((function t(r,n){var c,i,s,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.form.data,i=c.pwd,s=c.rePwd,i&&i===s){t.next=9;break}n.setValue("pwd",""),n.setValue("rePwd",""),u="\u5bc6\u7801\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\u5bc6\u7801\uff01",n.setError("pwd",u),t.next=14;break;case 9:return e.controller.password=i,t.next=12,e.controller.execute();case 12:void 0!==(u=t.sent)&&p.nav.push(l.createElement(p.Page,{header:"\u6ce8\u518c\u4e0d\u6210\u529f"},l.createElement("div",{className:"p-5 text-danger"},u)));case 14:return t.abrupt("return",u);case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(c.a)(a.a.mark((function t(r,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("rePwd"!==r){t.next=4;break}return t.next=3,e.onSubmit("submit",n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.page=function(){return l.createElement(p.Page,{header:e.controller.passwordPageCaption},l.createElement("div",{className:"w-max-20c my-5 py-5",style:{marginLeft:"auto",marginRight:"auto"}},"\u6ce8\u518c\u8d26\u53f7",l.createElement("br",null),l.createElement("div",{className:"py-2 px-3 my-2 text-primary bg-light"},l.createElement("b",null,e.controller.account)),l.createElement("div",{className:"h-1c"}),l.createElement(p.Form,{schema:e.schema,uiSchema:e.uiSchema,onButtonClick:e.onSubmit,onEnter:e.onEnter,requiredFlag:!1})))},e}return Object(s.a)(r,[{key:"open",value:function(){var e=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.uiSchema={items:{pwd:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},rePwd:{widget:"password",placeholder:"\u91cd\u590d\u5bc6\u7801",label:"\u91cd\u590d\u5bc6\u7801"},submit:{widget:"button",className:"btn btn-primary btn-block mt-3",label:this.controller.passwordSubmitCaption}}},this.openPage(this.page);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(m.b),j=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).page=function(t){var r=t.users,n=e.controller,a=n.account,c=n.successText,i=n.login;return void 0===r?l.createElement(p.Page,{header:!1},l.createElement("div",{className:"container w-max-30c"},l.createElement("div",{className:"my-5"},l.createElement("div",{className:"py-5"},"\u8d26\u53f7 ",l.createElement("strong",{className:"text-primary"},a," ")," ",c,"\uff01"),l.createElement("button",{className:"btn btn-success btn-block",type:"button",onClick:function(){return i(void 0)}},"\u76f4\u63a5\u767b\u5f55")))):l.createElement(p.Page,{header:!1},l.createElement("div",{className:"container w-max-30c"},l.createElement("div",{className:"my-5"},l.createElement("div",{className:"py-5 text-success"},c),r.map((function(e){var t=e.name;return l.createElement("div",{className:"py-2 cursor-pointer",onClick:function(){return i(t)}},"\u767b\u5f55\u8d26\u53f7 ",l.createElement("strong",{className:"text-primary"},t," "))})))))},e}return Object(s.a)(r,[{key:"open",value:function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openPage(this.page,{users:t});case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(m.b);r.d(t,"default",(function(){return N}));var O=[{name:"username",type:"string",required:!0,maxLength:100},{name:"password",type:"string",required:!0,maxLength:100},{name:"login",type:"submit"}],N=function(e){Object(u.a)(r,e);var t=Object(o.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return(e=t.call.apply(t,[this].concat(s))).res=Object(p.resLang)(f.c),e.uiSchema={items:{username:{placeholder:"\u624b\u673a/\u90ae\u7bb1/\u7528\u6237\u540d",label:"\u767b\u5f55\u8d26\u53f7"},password:{widget:"password",placeholder:"\u5bc6\u7801",label:"\u5bc6\u7801"},login:{widget:"button",className:"btn btn-primary btn-block mt-3",label:"\u767b\u5f55"}}},e.onSubmit=function(){var t=Object(c.a)(a.a.mark((function t(r,n){var c,i,s,u,o,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.form.data,i=c.username,void 0!==(s=c.password)){t.next=5;break}return t.abrupt("return","something wrong, pwd is undefined");case 5:return t.next=7,b.p.login({user:i,pwd:s,guest:p.nav.guest});case 7:if(void 0!==(u=t.sent)){t.next=12;break}return o=g(i),l=void 0!==o?o.caption:"\u7528\u6237\u540d",t.abrupt("return",l+"\u6216\u5bc6\u7801\u9519\uff01");case 12:return console.log("onLoginSubmit: user=%s pwd:%s",u.name,u.token),t.next=15,p.nav.logined(u,e.props.callback);case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.onEnter=function(){var t=Object(c.a)(a.a.mark((function t(r,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("password"!==r){t.next=4;break}return t.next=3,e.onSubmit("login",n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),e.clickReg=function(){new y(void 0).start()},e.clickForget=function(){new w(void 0).start()},e}return Object(s.a)(r,[{key:"render",value:function(){var e=this,t=l.createElement("div",null,l.createElement("div",{className:"d-block"},l.createElement("div",{className:"text-center"},l.createElement("button",{className:"btn btn-link",style:{margin:"0px auto"},onClick:this.clickReg},"\u6ce8\u518c\u8d26\u53f7")),p.nav.privacyEntry())),r=!1;return!0===this.props.withBack&&(r="\u767b\u5f55"),l.createElement(p.Page,{header:r,footer:t},l.createElement("div",{className:"d-flex p-5 flex-column justify-content-center align-items-center"},l.createElement("div",{className:"flex-fill"}),l.createElement("div",{className:"w-20c"},d(),l.createElement("div",{className:"h-2c"}),l.createElement(p.Form,{schema:O,uiSchema:this.uiSchema,onButtonClick:this.onSubmit,onEnter:this.onEnter,requiredFlag:!1}),l.createElement("button",{className:"btn btn-link btn-block",onClick:function(){return e.clickForget()}},"\u5fd8\u8bb0\u5bc6\u7801")),l.createElement("div",{className:"flex-fill"}),l.createElement("div",{className:"flex-fill"})))}}]),r}(l.Component)}}]);
//# sourceMappingURL=3.0aeef04c.chunk.js.map